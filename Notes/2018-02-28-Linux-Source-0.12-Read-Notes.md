
《Linux内核完全剖析-基于0.12内核》一书详尽地解析了Linux 0.12版本的内核源码，并且在书的最后一章给出了调试源代码的方法和在不同平台上编译的修改等。对于初学Linux内核的人来说是一本非常难得的好书，强烈推荐。如下记录一些相关的内容，以备之后查阅。

#### Linux 0.12版本不足 ####

1. 没有调试代码（ptrace）- 0.95版本支持
2. 专门进程等待队列 - 0.96版本支持
3. TCP/IP网络代码 - 0.96版本支持
4. 内存管理与现有Linux内核不同 - 0.99版本支持
5. ext2/ext3等文件系统 - 0.97版本支持
6. 虚拟文件系统 - 0.95版本支持
7. 登录功能 - 0.95版本支持

#### Linux 0.12所具有的内容 ####

**独立的引导和内核加载程序**

Linux 0.12版本中并没有使用LILO或GRUB等系统引导加载程序，而是Linus自己编写的简单引导和内核加载程序。所以在原始的Linux 0.12中内核Image和根文件系统是分属两个设备的。

**中断**

Linux 0.12完整地实现了中断流程，但是仅仅对使用到的中断过程做了代码编写，而其他的一些中断则都是按照错误进行处理，直接宕机。

**保护模式的支持**

在Linux 0.12中对于保护模式的支持基本是按照Intel的CPU的预想形式设置，页表被设置在内存0地址开始的一段内存中，方便访问；GDT安排固定内存地址；LDT和TSS则被放置在Task结构体中。

**进程调度**

进程调度实现了基本的优先级和分时的功能，但是它并不支持内核抢占，当然这在后面很久之后才有内核抢占的补丁。

**设备驱动**

设备驱动支持块设备驱动和字符设备驱动。

**内存管理**

在Linux 0.12中内存管理还比较弱，最大仅支持64MB的物理内存。即使这样，当时也已经支持了分页机制以及内存换入换出的功能。

在虚拟内存管理方面，将4G的地址空间进行分割，分割为64个任务，每个任务默认使用其中的128MB的虚拟地址空间；而并没有实现每一个进程都占据4G虚拟地址空间的形式。这块是和现代的Linux系统中差别比较明显的一块。相应地，在Linux 0.12版本中最多支持64个任务同时执行。

**协处理器**

在Linux 0.12版本时，并非每一台机器上都有协处理器，所以就有了模拟数学协处理器功能。

**文件系统**

在当时的Linux版本中还是使用Linux最初参考Minix系统编写的Minix 1.0的文件系统。但是它被改造过，支持高速缓存，结构上的分层，以及实现文件系统对底层设备的抽象。

#### 推荐参考书籍 ####

1. 《The C Programming Language》 Brian W. Kernighan和Dennis M. Ritchie
2. 《Unix操作系统设计》 M. J. Bach
3. 《操作系统：设计与实现》 Andrew S. Tanenbaum
4. 《Programming the 80386》 John H. Crawford
5. 《Linux内核源码分析》 Scott Maxwell
6. 《莱昂氏UNIX源代码分析》 John Lions

#### Linux内核源码资源 ####

1. https://www.kernel.org   // Linux内核源码官网
2. http://oldlinux.org      // 赵炯博士老版本Linux源码资源网址
3. https://www.kernel.org/pub/linux/kernel/ // 现存所有版本内核源码

By Andy @2018-03-28 11:20:38
